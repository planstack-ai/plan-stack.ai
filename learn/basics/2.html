<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What Consumes Tokens - Basics #2 - Plan Stack</title>
    <meta name="description" content="Understanding token consumption: it consumes more than you think. Learn where your tokens actually go.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../styles/common.css">
    <link rel="stylesheet" href="../styles/lesson.css">
</head>
<body>
<header>
    <div class="container">
        <a href="../../" class="logo">
            <div class="logo-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M4 6h16M4 12h16M4 18h10" stroke="#000"/></svg>
            </div>
            Plan Stack
        </a>
        <nav class="nav-links">
            <a href="https://github.com/planstack-ai/planstack/blob/main/docs/getting-started.md">Docs</a>
            <a href="../" class="active">Learn</a>
            <a href="../../articles/">Blog</a>
            <a href="https://github.com/planstack-ai/planstack" class="btn btn-secondary">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                GitHub
            </a>
        </nav>
    </div>
</header>

<main>
    <article class="lesson-container">
        <div class="lesson-meta">
            <span class="lesson-badge">Basics</span>
            <span class="lesson-number">Lesson 2 of 5</span>
        </div>

        <h1 class="lesson-title">What Consumes Tokens</h1>

        <div class="lesson-content">
            <p>
                "I thought I had plenty of tokens left, but suddenly Claude said my context was full."
                Sound familiar? Most people drastically underestimate how quickly tokens get consumed.
            </p>

            <p>
                The problem isn't just the code you paste. <strong>It's everything else you don't see.</strong>
            </p>

            <h2>The Four Token Consumers</h2>

            <p>Every interaction with Claude consumes tokens from four sources:</p>

            <table class="token-table">
                <thead>
                    <tr>
                        <th>Source</th>
                        <th>What It Is</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Input</strong></td>
                        <td>Your code, files, questions</td>
                        <td>~2K tokens</td>
                    </tr>
                    <tr>
                        <td><strong>Output</strong></td>
                        <td>Claude's responses</td>
                        <td>~1-4K tokens</td>
                    </tr>
                    <tr>
                        <td><strong>System Prompt</strong></td>
                        <td>Hidden instructions (CLAUDE.md, etc.)</td>
                        <td>~500-2K tokens</td>
                    </tr>
                    <tr>
                        <td><strong>History</strong></td>
                        <td>All previous messages in conversation</td>
                        <td>Accumulates!</td>
                    </tr>
                </tbody>
            </table>

            <h2>The Hidden Accumulation</h2>

            <p>
                Here's what surprises most people: <strong>conversation history accumulates with every message.</strong>
            </p>

            <p>
                Your first message might use 3K tokens. By message 10, you might be at 30K tokens—even if each
                individual message was small. By message 30, you could easily hit 100K tokens without realizing it.
            </p>

            <div class="callout warning">
                <p>
                    Every response Claude gives also counts against your context. A detailed explanation might
                    use 2,000 tokens. Ask for code examples? Another 1,500 tokens. It adds up fast.
                </p>
            </div>

            <h2>Real Numbers</h2>

            <p>To give you a sense of scale:</p>

            <table class="token-table">
                <thead>
                    <tr>
                        <th>Content</th>
                        <th>Approximate Tokens</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>A short question ("Fix this bug")</td>
                        <td>~50 tokens</td>
                    </tr>
                    <tr>
                        <td>A 100-line code file</td>
                        <td>~500-800 tokens</td>
                    </tr>
                    <tr>
                        <td>A 500-line code file</td>
                        <td>~2,500-4,000 tokens</td>
                    </tr>
                    <tr>
                        <td>Claude's typical response</td>
                        <td>~500-2,000 tokens</td>
                    </tr>
                    <tr>
                        <td>A long conversation (20 exchanges)</td>
                        <td>~40,000-80,000 tokens</td>
                    </tr>
                </tbody>
            </table>

            <h2>Why This Matters</h2>

            <p>
                Once you understand token consumption, you can make better decisions:
            </p>

            <ul>
                <li>Pass only the relevant parts of a file, not the whole thing</li>
                <li>Start fresh conversations for new tasks instead of continuing old ones</li>
                <li>Use <code>/clear</code> when your context gets bloated</li>
                <li>Keep Claude's responses concise when you don't need detail</li>
            </ul>

            <div class="key-takeaway">
                <h3>Key Takeaways</h3>
                <ul>
                    <li>Four things consume tokens: input, output, system prompt, history</li>
                    <li>Conversation history accumulates with every message</li>
                    <li>Claude's responses count against your context too</li>
                    <li>A 20-message conversation can easily use 50K+ tokens</li>
                </ul>
            </div>
        </div>

        <nav class="lesson-nav">
            <a href="./1.html" class="lesson-nav-btn">← Previous</a>
            <div class="progress-dots">
                <span class="progress-dot completed"></span>
                <span class="progress-dot active"></span>
                <span class="progress-dot"></span>
                <span class="progress-dot"></span>
                <span class="progress-dot"></span>
            </div>
            <a href="./3.html" class="lesson-nav-btn primary">Next: Why Accuracy Drops →</a>
        </nav>
    </article>
</main>

<footer>
    <div class="container">
        <p>Created by <a href="https://x-hack.jp">X-HACK Inc.</a> | MIT License</p>
        <div class="footer-links">
            <a href="https://github.com/planstack-ai/planstack">GitHub</a>
            <a href="../">Learn</a>
            <a href="../../articles/">Blog</a>
        </div>
    </div>
</footer>
</body>
</html>
